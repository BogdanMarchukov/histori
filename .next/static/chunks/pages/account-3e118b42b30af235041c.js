(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{7217:function(e,t,r){"use strict";r(7294);var n=r(9041),a=r(747),i=r.n(a),o=r(5893);t.Z=function(e){return e.loading?(0,o.jsx)("div",{className:i().loaderWrap,children:(0,o.jsx)(n.Z,{color:"secondary"})}):null}},5682:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ie}});var n=r(7294),a=r(8216),i=r(5140),o=r.n(i),s=r(7109),c=r(5725),l=r(2642),u=r(1508),d=r(1048),f=r(2793),p=(r(5697),r(6010)),h=r(7463),x=r(917),m=r(1220),v=r(6122),k=r(9602),g=r(1420);function j(e){return(0,g.Z)("MuiCircularProgress",e)}(0,r(1271).Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var y=r(5893);const w=["className","color","disableShrink","size","style","thickness","value","variant"];let b,M,Z,A,S=e=>e;const _=44,C=(0,x.F4)(b||(b=S`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),D=(0,x.F4)(M||(M=S`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),P=(0,k.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${(0,m.Z)(r.color)}`]]}})((({ownerState:e,theme:t})=>(0,f.Z)({display:"inline-block"},"determinate"===e.variant&&{transition:t.transitions.create("transform")},"inherit"!==e.color&&{color:t.palette[e.color].main})),(({ownerState:e})=>"indeterminate"===e.variant&&(0,x.iv)(Z||(Z=S`
      animation: ${0} 1.4s linear infinite;
    `),C))),T=(0,k.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),E=(0,k.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${(0,m.Z)(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})((({ownerState:e,theme:t})=>(0,f.Z)({stroke:"currentColor"},"determinate"===e.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})),(({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&(0,x.iv)(A||(A=S`
      animation: ${0} 1.4s ease-in-out infinite;
    `),D)));var R=n.forwardRef((function(e,t){const r=(0,v.Z)({props:e,name:"MuiCircularProgress"}),{className:n,color:a="primary",disableShrink:i=!1,size:o=40,style:s,thickness:c=3.6,value:l=0,variant:u="indeterminate"}=r,x=(0,d.Z)(r,w),k=(0,f.Z)({},r,{color:a,disableShrink:i,size:o,thickness:c,value:l,variant:u}),g=(e=>{const{classes:t,variant:r,color:n,disableShrink:a}=e,i={root:["root",r,`color${(0,m.Z)(n)}`],svg:["svg"],circle:["circle",`circle${(0,m.Z)(r)}`,a&&"circleDisableShrink"]};return(0,h.Z)(i,j,t)})(k),b={},M={},Z={};if("determinate"===u){const e=2*Math.PI*((_-c)/2);b.strokeDasharray=e.toFixed(3),Z["aria-valuenow"]=Math.round(l),b.strokeDashoffset=`${((100-l)/100*e).toFixed(3)}px`,M.transform="rotate(-90deg)"}return(0,y.jsx)(P,(0,f.Z)({className:(0,p.Z)(g.root,n),style:(0,f.Z)({width:o,height:o},M,s),ownerState:k,ref:t,role:"progressbar"},Z,x,{children:(0,y.jsx)(T,{className:g.svg,ownerState:k,viewBox:"22 22 44 44",children:(0,y.jsx)(E,{className:g.circle,style:b,ownerState:k,cx:_,cy:_,r:(_-c)/2,fill:"none",strokeWidth:c})})}))})),N=function(e){return e.loadMini?(0,y.jsx)(u.Z,{sx:e.sx,children:(0,y.jsx)(R,{sx:{color:e.color},size:e.size})}):null},I=function(e){var t,r=function(e,t){return e?(0,y.jsx)(N,{loadMini:e,sx:{marginBottom:"20px",marginTop:"22px"},color:"#aa00ff",size:20}):(0,y.jsx)("p",{children:t})};return(0,y.jsxs)("div",{className:o().wrepper,children:[(0,y.jsx)("input",{onChange:function(t){return e.updateAvatar(t)},className:o().hiddenInput,type:"file",title:""}),(0,y.jsx)(s.Z,{src:e.avatarImgSrc(null!==(t="http://olga-marchukova.ru/api/img/avatar/")?t:"",e.avatarSrc),variant:"circular",sx:{position:"relative",width:120,height:120,top:0,left:"344px"},alt:"\u0413\u043e\u0441\u0442\u044c"}),(0,y.jsxs)(c.ZP,{container:!0,children:[(0,y.jsx)(c.ZP,{item:!0,xs:4,children:(0,y.jsxs)("div",{className:o().nameData,children:[(0,y.jsx)("p",{children:"\u041f\u043e\u0447\u0442\u0430:"}),(0,y.jsx)("p",{children:"\u0418\u043c\u044f:"}),(0,y.jsx)("p",{children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f:"}),(0,y.jsx)("p",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:"})]})}),(0,y.jsx)(c.ZP,{item:!0,xs:8,children:(0,y.jsxs)("div",{className:o().data,children:[r(e.loadMini,e.email),r(e.loadMini,e.name),r(e.loadMini,e.surname),r(e.loadMini,e.tel)]})})]}),(0,y.jsx)(l.Z,{sx:{color:"#aa00ff",position:"relative",left:"135px",top:"75px"},variant:"outlined",onClick:function(){return e.onOffEditorAccountModel(e.editAccountWindow)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"})]})},O=r(5861),W=r(7757),U=r.n(W),z=r(8393),$=r(908),B=r(9350);function F(e){return L.apply(this,arguments)}function L(){return(L=(0,O.Z)(U().mark((function e(t){var r,n,a,i,o;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(t,!0),e.next=3,fetch("/api/init/account",{method:"GET",headers:{Authorization:null!==(r=(0,z.$o)("accessToken"))&&void 0!==r?r:""}});case 3:if(401!==(n=e.sent).status){e.next=11;break}return e.next=7,(0,z.jM)();case 7:"accessToken"in(a=e.sent)&&(i=a.accessToken,(0,z.nL)("accessToken",i),J(t,a),X(t,!1)),"error"in a&&(a.error,a.errorMassage,X(t,!1)),"redirect"in a&&(a.redirect,a.patch,X(t,!1));case 11:if(200!==n.status){e.next=17;break}return e.next=14,n.json();case 14:o=e.sent,t({type:$.M.INIT_ACCOUNT,payload:o}),X(t,!1);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){e({type:$.M.UPDATE_USER_REDUCER,payload:t})}function X(e,t){e({type:$.M.MIMI_LOADER_START_STOP,payload:t})}function H(e,t){e({type:$.M.OPEN_MODEL_WIDOW_EDIT_ACCOUNT,payload:!t})}function V(e,t,r){if(!("accessToken"in r))return null;q(e,t)}function q(e,t){return G.apply(this,arguments)}function G(){return(G=(0,O.Z)(U().mark((function e(t,r){var n,a,i,o,s,c,l,u;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,B.gJ)(t,!0),!(n=r.target.files[0])){e.next=29;break}if(a=(0,z.$o)("accessToken")){e.next=11;break}return e.next=7,(0,z.jM)();case 7:i=e.sent,V(t,r,i),e.next=29;break;case 11:return e.next=13,(0,z.kB)("/api/create/avatar",[n],["userAvatar"],a);case 13:if(401!==(o=e.sent).status){e.next=19;break}return e.next=17,(0,z.jM)();case 17:s=e.sent,V(t,r,s);case 19:if(200!==o.status){e.next=28;break}return(0,B.gJ)(t,!1),e.next=23,o.json();case 23:c=e.sent,l=c.patch,console.log(c),u=l.replace("public/","/"),t({type:$.M.SAVE_AVATAR,payload:u});case 28:415===o.status&&((0,B.gJ)(t,!1),(0,B.cz)(t,{error:!0,errorMassage:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u0430\u0440\u043c\u0430\u0442 \u0438\u043b\u0438 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u043f\u0440\u0438\u0432\u044b\u0448\u044b\u0435\u0442 10mb"},"error"));case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e,t,r){return K.apply(this,arguments)}function K(){return(K=(0,O.Z)(U().mark((function e(t,r,n){var a,i,o,s;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(t,!0),a=(0,z.$o)("accessToken"),e.next=4,fetch("/api/edit/user",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:null!==a&&void 0!==a?a:""}});case 4:if(200!==(i=e.sent).status){e.next=8;break}return e.next=8,F(t);case 8:if(401!==i.status){e.next=19;break}return e.next=11,(0,z.jM)();case 11:if(!("accessToken"in(o=e.sent))){e.next=19;break}return s=o.accessToken,(0,z.nL)("accessToken",s),e.next=17,Q(t,r,n);case 17:e.next=19;break;case 19:i.status;case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=r(6483),ee=r(5116),te=function(e){var t=(0,n.useState)(""),r=t[0],a=t[1],i=(0,n.useState)(""),o=i[0],s=i[1],c=(0,n.useState)(""),d=c[0],f=c[1],p=function(){var e={};return r&&(e.userName=r),o&&(e.surname=o),d&&(e.tel=d),0==Object.keys(e).length?null:e};return(0,y.jsx)(Y.Z,{open:e.editAccountWindow,onClose:function(){return e.onOffEditorAccountModel(e.editAccountWindow)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,y.jsx)(u.Z,{sx:{position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:400,height:355,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},children:(0,y.jsxs)(u.Z,{sx:{display:"flex",height:300,flexDirection:"column",alignItems:"center",justifyContent:"space-around"},children:[(0,y.jsx)("span",{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),(0,y.jsx)(ee.Z,{onChange:function(e){return a(e.target.value)},sx:{width:"100%"},size:"small",label:"\u0418\u043c\u044f",variant:"outlined",autoComplete:"username"}),(0,y.jsx)(ee.Z,{onChange:function(e){return s(e.target.value)},sx:{width:"100%"},size:"small",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",autoComplete:"family"}),(0,y.jsx)(ee.Z,{onChange:function(e){return f(e.target.value)},sx:{width:"100%"},type:"number",size:"small",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",autoComplete:"tel",variant:"outlined"}),(0,y.jsx)(l.Z,{onClick:function(){var t;p()&&e.editAccountUserData(null!==(t=p())&&void 0!==t?t:{},e.userId)},variant:"outlined",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})})})},re=r(3060),ne=r(7217),ae=r(6787);var ie=(0,a.$j)((function(e){return{email:e.userReducer.email,avatarSrc:e.homePageReducer.pathAvatar,loadMini:e.homePageReducer.loadMini,name:e.userReducer.userName,surname:e.userReducer.surname,tel:e.userReducer.tel,editAccountWindow:e.accountPageReducer.editAccountWindow,alert:e.homePageReducer.alert,loading:e.homePageReducer.loading,userId:e.userReducer.id}}),(function(e){return{initAccount:function(){return e((function(){return F(e)}))},onOffEditorAccountModel:function(t){return e((function(){return H(e,t)}))},updateAvatar:function(t){return e((function(){return q(e,t)}))},editAccountUserData:function(t,r){return e((function(){return Q(e,t,r)}))},avatarImgSrc:function(t,r){return e((function(){return(0,z.gR)(t,r)}))}}}))((function(e){var t=e.initAccount;return(0,n.useEffect)((function(){t()}),[t]),(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(ae.Z,{children:[(0,y.jsx)(ne.Z,{loading:e.loading}),(0,y.jsx)(te,{editAccountUserData:e.editAccountUserData,userId:e.userId,editAccountWindow:e.editAccountWindow,onOffEditorAccountModel:e.onOffEditorAccountModel}),(0,y.jsx)(re.Z,{alert:e.alert}),(0,y.jsxs)(u.Z,{sx:{display:"flex"},children:[(0,y.jsx)(I,{avatarImgSrc:e.avatarImgSrc,updateAvatar:e.updateAvatar,editAccountWindow:e.editAccountWindow,onOffEditorAccountModel:e.onOffEditorAccountModel,avatarSrc:e.avatarSrc,email:e.email,loadMini:e.loadMini,name:e.name,surname:e.surname,tel:e.tel}),(0,y.jsx)("h1",{children:e.email})]})]})})}))},431:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return r(5682)}])},747:function(e){e.exports={loaderWrap:"Loader_loaderWrap__1kHQX"}},5140:function(e){e.exports={wrepper:"UserDataBlock_wrepper__1gHDF",nameData:"UserDataBlock_nameData__3RE7q",data:"UserDataBlock_data__28h-4",hiddenInput:"UserDataBlock_hiddenInput__3x6aM"}}},function(e){e.O(0,[824,938,63,914,774,888,179],(function(){return t=431,e(e.s=t);var t}));var t=e.O();_N_E=t}]);